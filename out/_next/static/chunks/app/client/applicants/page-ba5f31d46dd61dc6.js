(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{2832:function(e,t,s){Promise.resolve().then(s.bind(s,6014))},6014:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(3827),l=s(4090),a=s(3167),n=s(425),i=s(5754),d=s(5509);let o=[{value:"new",label:"新規"},{value:"screening",label:"書類選考中"},{value:"interview",label:"面接中"},{value:"offer",label:"内定"},{value:"rejected",label:"不採用"}],u={new:"bg-blue-100 text-blue-700",screening:"bg-amber-100 text-amber-700",interview:"bg-violet-100 text-violet-700",offer:"bg-emerald-100 text-emerald-700",rejected:"bg-rose-100 text-rose-700"},c=e=>{let{applications:t,jobs:s,onStatusChange:c}=e,[x,h]=(0,l.useState)(null),m=new Map(s.map(e=>[e.id,e]));return t.length?(0,r.jsx)("div",{className:"overflow-hidden rounded-xl border border-border bg-card shadow-sm",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-border text-sm",children:[(0,r.jsx)("thead",{className:"bg-muted text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4",children:"応募者"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"応募求人"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"在留資格 / JLPT"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"ステータス"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right",children:"アクション"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border/60",children:t.map(e=>{var t,s,l;let n=m.get(e.jobId),p=x===e.id;return(0,r.jsxs)("tr",{className:"transition hover:bg-muted/60",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"font-semibold text-foreground",children:e.candidateName}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.contactEmail}),e.contactPhone&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.contactPhone})]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:null!==(s=null==n?void 0:n.title)&&void 0!==s?s:"求人情報なし"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:null==n?void 0:n.company.name})]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.residenceStatus}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["JLPT ",e.jlptLevel]})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:(0,a.Z)("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",u[e.status]),children:null!==(l=null===(t=o.find(t=>t.value===e.status))||void 0===t?void 0:t.label)&&void 0!==l?l:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:p?(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(d.P,{value:e.status,onChange:t=>c(e.id,t.target.value),className:"max-w-[160px]",children:o.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>h(null),children:"閉じる"})]}):(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>h(e.id),children:"ステータス更新"})})]},e.id)})})]})}):(0,r.jsx)(n.u,{title:"応募者はまだいません",description:"求人ページから応募が届くとここに表示されます。"})};var x=s(7939),h=s(2148),m=s(5062),p=s(3326),f=s(4014),v=()=>{let[e,t]=(0,l.useState)(void 0),{jobs:s}=(0,f.C)({initialFilters:{isPublished:void 0}}),{applications:a,isLoading:n,error:i,updateStatus:o}=(0,p.o)({jobId:e});return(0,r.jsx)(x.n,{children:(0,r.jsxs)("div",{className:"container space-y-8 py-12",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"応募者管理"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"求人ごとの応募者を把握し、選考ステータスを更新しましょう。"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 rounded-xl border border-border bg-card p-6 shadow-sm md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("label",{className:"space-y-2 text-sm text-muted-foreground md:w-1/3",children:["求人で絞り込む",(0,r.jsxs)(d.P,{value:null!=e?e:"",onChange:e=>t(e.target.value||void 0),children:[(0,r.jsx)("option",{value:"",children:"すべての求人"}),s.map(e=>(0,r.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["現在の応募数: ",(0,r.jsx)("span",{className:"font-semibold text-foreground",children:a.length})," 件"]})]}),n?(0,r.jsx)(m.LoadingSpinner,{fullHeight:!0}):i?(0,r.jsx)(h.B,{description:i,onRetry:()=>t(void 0)}):(0,r.jsx)(c,{applications:a,jobs:s,onStatusChange:(e,t)=>{o(e,t)}})]})})}},425:function(e,t,s){"use strict";s.d(t,{u:function(){return a}});var r=s(3827),l=s(5754);let a=e=>{let{title:t,description:s,actionLabel:a,onAction:n,icon:i}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border border-dashed border-border bg-card/40 p-10 text-center",children:[i,(0,r.jsx)("p",{className:"text-lg font-semibold text-foreground",children:t}),s&&(0,r.jsx)("p",{className:"max-w-md text-sm text-muted-foreground",children:s}),a&&n&&(0,r.jsx)(l.Button,{variant:"outline",onClick:n,children:a})]})}},2148:function(e,t,s){"use strict";s.d(t,{B:function(){return a}});var r=s(3827),l=s(5754);let a=e=>{let{title:t="エラーが発生しました",description:s="ページを再読み込みしてください。",actionLabel:a="再試行",onRetry:n,children:i}=e;return(0,r.jsxs)("div",{className:"space-y-4 rounded-lg border border-destructive/20 bg-destructive/10 p-6 text-sm text-destructive",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-base font-semibold",children:t}),(0,r.jsx)("p",{className:"mt-1 text-sm text-destructive/80",children:s})]}),i,n&&(0,r.jsx)(l.Button,{variant:"destructive",onClick:n,children:a})]})}},5509:function(e,t,s){"use strict";s.d(t,{P:function(){return n}});var r=s(3827),l=s(4090),a=s(2169);let n=(0,l.forwardRef)((e,t)=>{let{className:s,children:l,...n}=e;return(0,r.jsx)("select",{ref:t,className:(0,a.cn)("flex h-10 w-full appearance-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:l})});n.displayName="Select"},3326:function(e,t,s){"use strict";s.d(t,{o:function(){return a}});var r=s(4090),l=s(8140);let a=function(){let{jobId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),o=(0,r.useCallback)(()=>{try{n(!0);let t=l.h.list(e);s(t),d(null)}catch(e){console.error(e),d("応募者情報の取得に失敗しました。")}finally{n(!1)}},[e]);return(0,r.useEffect)(()=>{o()},[o]),{applications:t,isLoading:a,error:i,reload:o,create:(0,r.useCallback)(e=>{let t=l.h.create(e);return s(e=>[t,...e]),t},[]),updateStatus:(0,r.useCallback)((e,t)=>{let r=l.h.updateStatus(e,t);return s(t=>t.map(t=>t.id===e?r:t)),r},[])}}},4014:function(e,t,s){"use strict";s.d(t,{C:function(){return a}});var r=s(4090),l=s(605);let a=function(){let{initialFilters:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)({isPublished:!0,...e}),[i,d]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null),[c,x]=(0,r.useState)(()=>l.g.industries()),[h,m]=(0,r.useState)(()=>l.g.prefectures()),p=(0,r.useCallback)(()=>{try{d(!0);let e=l.g.list(a);s(e),x(l.g.industries()),m(l.g.prefectures()),u(null)}catch(e){console.error(e),u("求人情報の取得に失敗しました。")}finally{d(!1)}},[a]);(0,r.useEffect)(()=>{p()},[p]);let f=(0,r.useCallback)(e=>{try{let t=l.g.create(e);return s(e=>[t,...e]),x(l.g.industries()),m(l.g.prefectures()),t}catch(e){throw console.error(e),e}},[]),v=(0,r.useCallback)((e,t)=>{let r=l.g.update(e,t);return s(t=>t.map(t=>t.id===e?r:t)),x(l.g.industries()),m(l.g.prefectures()),r},[]),g=(0,r.useCallback)(e=>{let t=l.g.togglePublish(e.id);return s(s=>s.map(s=>s.id===e.id?t:s)),x(l.g.industries()),m(l.g.prefectures()),t},[]);return{jobs:t,filters:a,setFilters:n,isLoading:i,error:o,reload:p,createJob:f,updateJob:v,togglePublish:g,industries:(0,r.useMemo)(()=>c,[c]),prefectures:(0,r.useMemo)(()=>h,[h]),jlptLevels:(0,r.useMemo)(()=>l.g.jlptLevels(),[])}}},8140:function(e,t,s){"use strict";s.d(t,{h:function(){return d}});var r=s(5731),l=s(8112),a=s(8662),n=s(8521);class i{readRecord(){var e;let t=this.storage.get(r.I.applications);if(t&&t.version===r.Z)return t;let s={version:r.Z,data:null!==(e=null==t?void 0:t.data)&&void 0!==e?e:[],updatedAt:new Date().toISOString()};if(this.storage.isAvailable)try{this.storage.set(r.I.applications,s)}catch(e){console.error(e)}return s}writeRecord(e){let t={version:r.Z,data:e,updatedAt:new Date().toISOString()};try{this.storage.set(r.I.applications,t)}catch(e){throw(0,l.l)("APPLICATION_SAVE_FAILED","応募データの保存に失敗しました。",void 0,e)}}list(e){let t=this.readRecord().data;return e?t.filter(t=>t.jobId===e):t}findById(e){var t;return null!==(t=this.readRecord().data.find(t=>t.id===e))&&void 0!==t?t:null}create(e){var t;let s=new Date().toISOString(),r={...e,id:(0,a.O)("app"),status:null!==(t=e.status)&&void 0!==t?t:"new",submittedAt:s,updatedAt:s},l=this.readRecord();return this.writeRecord([r,...l.data]),r}update(e,t){var s;let r=this.readRecord(),a=r.data.findIndex(t=>t.id===e);if(-1===a)throw(0,l.l)("APPLICATION_NOT_FOUND","指定された応募が見つかりません。");let n={...r.data[a],...t,status:null!==(s=t.status)&&void 0!==s?s:r.data[a].status,updatedAt:new Date().toISOString()},i=[...r.data];return i[a]=n,this.writeRecord(i),n}updateStatus(e,t){return this.update(e,{status:t})}summaryByJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=this.list(e),r=s.reduce((e,t)=>{var s;return e[t.status]=(null!==(s=e[t.status])&&void 0!==s?s:0)+1,e},{new:0,screening:0,interview:0,offer:0,rejected:0});return{jobId:e,jobTitle:t,totalApplicants:s.length,groupedByStatus:r}}constructor(e=n.Hw){this.storage=e}}let d=new i}},function(e){e.O(0,[725,971,69,744],function(){return e(e.s=2832)}),_N_E=e.O()}]);